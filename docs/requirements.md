# 约拍平台需求文档说明书

> 版本：v1.0（草案）
> 日期：2026-01-16
> 依据：`docs/PRD.md`

## 1. 文档目的
将 PRD 转化为可执行的详细需求说明，明确业务规则、功能细化、验收标准与后续可能需求，为设计、开发、测试与运营提供统一依据。

## 2. 背景与目标
### 2.1 背景问题
- 供需信息不对称，用户难以快速找到合适摄影师。
- 线下履约不稳定，交易信任成本高。
- 沟通成本高，报价与档期确认流程分散。

### 2.2 目标
- 提升供需撮合效率与履约完成率。
- 建立信任与信用体系，降低纠纷。
- 构建可持续的商业模式与增长路径。

## 3. 范围与假设
### 3.1 范围（本期）
- 移动端：iOS/Android（Flutter）。
- 管理后台：Web（React + Ant Design）。
- 后端：Rust 单体后端服务（Axum + SeaORM）。
- 角色：用户、摄影师/摄影团队、平台管理员。
- 核心流程：需求发布、匹配、沟通、报价、下单、支付、履约、评价。
- 基础风控与内容治理。
- 需求侧重点：个人用户约拍 + 瑜伽馆客户（商户/品牌）场景。

### 3.2 假设与待确认
- 市场范围与合规要求。
- 平台收费模式与抽佣比例。
- 支付方式确定为直付（不托管、无资金监管）。

## 4. 角色与权限
### 4.1 角色
- **用户**：发布需求、选择摄影师、支付与评价。
- **摄影师/摄影团队**：展示作品、报价、履约。
- **平台管理员**：资质审核、内容治理、纠纷处理、运营配置。

### 4.2 权限矩阵（摘要）
| 功能 | 用户 | 摄影师/团队 | 管理员 |
|---|---|---|---|
| 发布需求 | ✅ | ❌ | ❌ |
| 接单/报价 | ❌ | ✅ | ❌ |
| 订单管理 | ✅（本人） | ✅（本人） | ✅（全量） |
| 资质/内容审核 | ❌ | ❌ | ✅ |
| 纠纷处理 | ❌ | ❌ | ✅ |

## 5. 术语
- **需求单**：用户发布的约拍需求。
- **报价单**：摄影师对需求的服务方案与报价。
- **订单**：双方确认并产生支付的交易记录。
- **履约**：线下拍摄及交付完成。
- **商户客户**：瑜伽馆等机构客户，存在批量/周期性需求。

## 6. 核心流程
### 6.1 用户流程（需求侧）
1) 发布需求或搜索摄影师
2) 收到报价/推荐
3) 确认方案与档期
4) 下单与支付（定金/全款）
5) 履约完成并评价

### 6.2 摄影师流程（供给侧）
1) 入驻申请与认证
2) 维护档期与作品
3) 响应需求并报价
4) 确认订单并履约
5) 结算与评价管理

### 6.3 瑜伽馆客户流程（需求侧-商户）
1) 创建品牌/场馆需求（宣传/课程/活动）
2) 选择摄影师并确认套餐或周期档期
3) 合同与付款条款确认
4) 履约与多版本交付验收
5) 复购/长期合作

## 7. 功能需求（详细）
以下各模块均包含：功能描述、业务规则、验收标准。

### 7.1 账号与身份
**功能描述**
- 手机号注册/登录。
- 角色切换（用户/摄影师/团队成员）。
- 摄影师实名认证与资质提交。

**业务规则**
- 摄影师/团队必须完成认证才可报价与接单。
- 认证状态分为：未提交、审核中、通过、驳回。

**验收标准**
- 未认证摄影师无法提交报价。
- 认证驳回需展示原因并允许重新提交。

### 7.2 摄影师/团队入驻与管理
**功能描述**
- 个人/团队入驻。
- 团队成员角色管理（管理员/成员）。
- 作品集与服务项目维护。

**业务规则**
- 团队管理员可分配成员权限。
- 作品集需通过基础内容审核。

**验收标准**
- 团队成员仅可编辑被授权的内容。
- 违规作品集不可公开展示。

### 7.3 需求发布
**功能描述**
- 需求单字段：类型、城市、时间、预算、人数、风格、参考图。
- 需求支持编辑、关闭、复制。

**业务规则**
- 必填字段为空不得发布。
- 需求关闭后不可继续报价。
- 商户需求可标记“周期/批量”，并填写期望档期区间。

**验收标准**
- 需求发布后进入“待报价”状态。
- 关闭需求后摄影师无法再提交报价。
- 周期/批量需求可被检索与筛选。

### 7.4 搜索与匹配
**功能描述**
- 按城市、预算、风格、档期筛选。
- 推荐列表：基于评分、履约率、响应速度。

**业务规则**
- 已满档摄影师不进入推荐。
- 违规/冻结账号不展示。

**验收标准**
- 过滤条件生效且可组合使用。
- 推荐结果可解释（至少展示评分与完成率）。

### 7.5 沟通与报价
**功能描述**
- 站内聊天（文本/图片/文件）。
- 报价单：价格、服务范围、交付时间、修片次数。

**业务规则**
- 报价单可修改但保留历史版本。
- 超过有效期未确认自动失效。

**验收标准**
- 报价单过期后不允许确认订单。
- 历史版本可追溯。

### 7.6 订单与支付
**功能描述**
- 订单创建、确认、支付。
- 支持定金/全款。
 - 直付模式：款项直接支付给摄影师/商户，平台记录交易与服务费。

**业务规则**
- 支付后订单进入“已支付”。
- 退款规则随状态变更（可配置）。
- 商户订单支持分期/阶段款（如首款、履约中期、尾款）。

**验收标准**
- 支付成功后生成支付记录与凭证。
- 取消订单按规则自动计算退款金额。
- 分期订单需生成阶段支付记录并可追溯。
 - 退款流程记录包含“发起方、责任方、到账凭证”。

#### 7.6.1 支付与退款规则矩阵（通用）
> 规则需支持管理后台配置（时间阈值、比例、违约金）。以下为直付场景默认常规规则。

**状态-退款基准表（默认）**
| 订单状态 | 取消方 | 默认退款 | 备注 |
|---|---|---|---|
| 待确认 | 任一方 | 100% | 不产生费用 |
| 已确认未支付 | 任一方 | 100% | 订单关闭 |
| 已支付（定金） | 用户 | 0%~100% | 按时间分段比例退定金（见下表） |
| 已支付（定金） | 摄影师 | 100% | 摄影师承担违约金（平台记录与扣分） |
| 已支付（全款） | 用户 | 0%~100% | 按时间分段比例退费（见下表） |
| 已支付（全款） | 摄影师 | 100% | 退全款+违约金（平台记录与扣分） |
| 履约中 | 任一方 | 协商 | 按已完成比例结算 |
| 已完成/已评价 | 任一方 | 0% | 进入纠纷/售后流程 |

**取消原因-责任判定（默认）**
| 原因 | 责任方 | 处理建议 |
|---|---|---|
| 用户临时变更/个人原因 | 用户 | 按时间节点扣除定金/服务费 |
| 摄影师临时取消 | 摄影师 | 退费并支付违约金 |
| 不可抗力 | 双方 | 退费或延期，平台豁免服务费 |
| 虚假需求/违规内容 | 用户 | 退费比例降低或不退 |

**时间分段与比例（默认常规方案）**
> 以拍摄开始时间为 T。
| 取消时间 | 定金退款比例 | 全款退款比例 |
|---|---|---|
| T-≥7天 | 80% | 90% |
| T-3~7天 | 50% | 70% |
| T-<3天 | 0% | 50% |

**违约金（默认）**
- 摄影师取消：违约金=订单金额的10%（最低不低于定金）。
- 用户取消：不额外收取违约金，仅按比例退款。

**直付退款执行说明**
- 退款由收款方原路退回，平台提供流程提醒与凭证上传。
- 超时未退款将触发信用扣分与曝光降权；严重者冻结账号。

#### 7.6.2 分期/阶段款规则（商户）
**建议默认比例（可配置）**
- 首款（签约/确认档期）：30%
- 中期款（完成首场/阶段履约）：40%
- 尾款（全部交付验收）：30%

**验收标准**
- 各阶段付款需绑定“里程碑完成事件”。
- 若阶段未通过验收，可触发整改/延期而非自动放款。

### 7.7 履约与交付
**功能描述**
- 拍摄完成确认。
- 交付方式（线下/线上文件链接）。

**业务规则**
- 交付确认后进入“已完成”。
- 交付延迟需支持延期申请。
- 商户交付可包含“多版本物料”与“品牌授权范围”说明。

**验收标准**
- 用户确认交付后订单不可回退。
- 延期需双方确认。
- 多版本交付需可追溯版本与验收结果。

### 7.8 评价与信用
**功能描述**
- 多维度评分与文本评价。
- 评价标签体系。

**业务规则**
- 评价需在订单完成后发起。
- 恶意评价可申诉。

**验收标准**
- 未完成订单无法评价。
- 申诉进入管理员处理队列。

### 7.9 纠纷与售后
**功能描述**
- 投诉入口与证据上传。
- 管理员调解与裁决。

**业务规则**
- 投诉需在订单完成后 N 天内提交。
- 纠纷状态：提交 → 处理中 → 结案。
- 直付场景下，平台裁决为“处理建议”，退款需责任方执行。

**验收标准**
- 投诉提交后生成唯一编号。
- 管理员可查看证据与历史记录。

### 7.10 消息与通知
**功能描述**
- 系统通知、订单变更提醒、聊天提醒。

**业务规则**
- 关键状态变更必须推送。

**验收标准**
- 订单状态变化触发通知。

### 7.11 管理后台
**功能描述**
- 资质审核、内容审核。
- 订单、支付、纠纷管理。
- 运营配置（标签、推荐位、活动）。

**业务规则**
- 关键操作需审计日志。

**验收标准**
- 管理后台操作生成可追溯日志。

### 7.12 商户能力（瑜伽馆客户）
**功能描述**
- 商户档案与品牌信息（Logo、品牌色、授权联系人）。
- 需求批量创建（多场次/多门店）。
- 结算/发票信息维护。

**业务规则**
- 商户账号需绑定联系人与收款信息（按合规要求）。
- 需求可选择“周期合作”并设置复用条款。

**验收标准**
- 商户可在一个需求中创建多场次档期。
- 发票信息可维护并用于订单结算记录。

#### 7.12.1 商户套餐与服务模板
**功能描述**
- 预置套餐模板（场次、时长、地点、人员、交付清单、修片次数、授权范围）。
- 支持模板复制与自定义（用于同类课程/活动快速发布）。

**业务规则**
- 套餐模板必须包含“交付清单”和“交付周期”。
- 模板变更不影响已生成订单。

**验收标准**
- 商户可创建/编辑/下线套餐模板。
- 模板可一键生成需求单并进入待报价。

#### 7.12.2 商户内部审批流
**功能描述**
- 角色：发起人、负责人、财务（可配置）。
- 审批流：草稿 → 待审批 → 已批准 → 已发布。

**业务规则**
- 可按预算阈值自动触发财务审批。
- 审批人可驳回并要求修改。

**验收标准**
- 未审批的需求不可对外发布。
- 审批记录可追溯（时间、人员、意见）。

#### 7.12.3 合同要素与授权条款
**功能描述**
- 生成合同字段：服务内容、交付清单、交付周期、费用与支付计划、违约金、版权与肖像授权、保密条款。

**业务规则**
- 合同字段必须与订单绑定并可导出。
- 授权范围需明确“用途/期限/平台内外”。

**验收标准**
- 订单可生成合同摘要并展示关键条款。
- 授权条款变更需双方确认。

#### 7.12.4 交付验收与对账
**功能描述**
- 交付验收期限（如 N 天内确认）。
- 多场次对账单与结算汇总。

**业务规则**
- 到期未确认默认“自动验收”（可配置）。
- 对账单按场次/门店聚合。

**验收标准**
- 商户可下载对账单并与支付记录匹配。
- 未通过验收的交付不可触发尾款放款。

#### 7.12.5 品牌素材与风格库
**功能描述**
- 商户品牌素材库（Logo、主视觉、参考风格）。
- 供摄影师报价与拍摄参考。

**业务规则**
- 素材库支持版本管理与权限控制。

**验收标准**
- 摄影师在报价/履约中可查看最新素材版本。

## 8. 数据与状态机（摘要）
### 8.1 订单状态
`草稿 → 待确认 → 已确认 → 已支付 → 履约中 → 已完成 → 已评价`

### 8.2 认证状态
`未提交 → 审核中 → 通过 → 驳回 → 重新提交`

### 8.3 主要数据实体
- 用户、摄影师/团队、作品集、需求单、报价单、订单、支付、评价、纠纷。

## 9. 非功能需求
- 性能：核心接口 P95 < 300ms。
- 可用性：99.9% 可用。
- 安全：鉴权、加密、日志审计。
- 隐私与合规：实名认证、隐私协议、内容合规。

## 10. 风险与边界
- 线下履约不可控导致纠纷。
- 未成年人拍摄合规风险。
- 盗用作品、版权争议。
- 直付模式下退款与纠纷处理效率受限。

## 11. 后续潜在需求（深挖）
以下为可能的后续迭代需求，建议按商业模式与市场验证结果决定优先级：

### 11.1 商业化与交易
- 平台抽佣与阶梯费率。
- 会员体系（摄影师/用户）。
- 托管支付与分期付款。
- 电子合同/在线签约。
- 发票与对公结算支持。

### 11.2 履约与交付增强
- 在线选片与修片流程管理。
- 交付文件版本管理与水印。
- 成片版权授权与买断协议。
- 多门店/多场次的交付对账单。

### 11.3 摄影师成长与运营
- 摄影师等级体系与认证徽章。
- 数据分析面板（曝光、转化）。
- 线下活动/培训/平台认证。

### 11.4 需求侧增强
- 组合套餐与团购需求。
- 企业/品牌客户管理。
- 多城市/跨城拍摄支持。
- 商户审批流（多角色确认报价/合同）。

### 11.5 智能化与风控
- 智能匹配与自动报价建议。
- 风控评分与异常行为识别。
- 商户资质核验与异常交易预警。
- 保险/担保服务引入。

## 12. 验收与交付
- 功能验收按模块逐项对照。
- 关键流程必须闭环：需求发布 → 报价 → 下单 → 支付 → 履约 → 评价。
- 风控/审核机制必须可追溯。
