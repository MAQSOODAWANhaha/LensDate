# 任务计划：约拍平台功能实现

## 目标
基于架构与需求文档，完整落地项目结构、数据库与核心功能实现（后端为主），并搭建移动端与管理后台基础框架。

## 当前阶段
阶段 10

## 阶段划分

### 阶段 1：工程结构与依赖
- [x] 创建整体目录结构
- [x] 初始化后端 Rust 单体后端服务
- [x] 输出数据库迁移/DDL（如需）
- **状态：** 已完成

### 阶段 2：后端核心能力
- [x] 账号/认证/角色
- [x] 需求/报价/订单/支付
- [x] 交付/评价/纠纷
- **状态：** 已完成

### 阶段 3：商户能力
- [x] 商户档案/门店/成员
- [x] 模板/合同/发票/审批
- **状态：** 已完成

### 阶段 4：消息与管理后台
- [x] IM/通知/审计日志
- [x] 管理后台接口
- **状态：** 已完成

### 阶段 5：移动端与管理后台骨架
- [x] Flutter 移动端目录与模块骨架
- [x] 管理后台目录与模块骨架
- **状态：** 已完成

### 阶段 6：测试与文档同步
- [x] API/数据库文档对齐
- [x] 基础测试与说明
- **状态：** 已完成

### 阶段 7：移动端用户侧功能
- [x] 登录与会话
- [x] 需求发布/列表/详情
- [x] 报价列表与接受
- [x] 订单/支付/退款/交付/评价/纠纷
- **状态：** 已完成

### 阶段 8：管理后台功能完善
- [x] 管理动作（审核/冻结/纠纷处理）
- [x] 订单/纠纷详情
- [x] 审计日志列表/筛选
- **状态：** 已完成

### 阶段 9：运营配置完善
- [x] 配置项与策略联动
- [x] 模板/商户流程补充
- **状态：** 已完成

### 阶段 10：数据与报表
- [x] 指标统计与趋势
- [x] 报表导出
- **状态：** 已完成

## 关键问题
1. 是否先完成后端 API 再启动移动端开发？
2. 管理后台是否采用 React + Ant Design？
3. 是否需要接入真实支付渠道联调？

## 已做决策
| 决策 | 理由 |
|------|------|
| 支付为直付模式（不托管） | 与业务定位一致 |
| 数据库使用 PostgreSQL | 结构化数据与事务需求 |
| 后端框架采用 Rust + Axum | 与架构文档一致 |

## 已遇到的错误
| 错误 | 尝试次数 | 处理方式 |
|------|----------|----------|
| cargo test 超时 | 1 | 增加超时时间后重试成功 |
| admin 列表接口编译失败（返回类型不匹配/条件方法名） | 1 | 修正为分页结构并使用 is_not_in |
| quotes 列表编译失败（不存在 CreatedAt 字段/未使用 import） | 1 | 移除排序与多余 import |

## 备注
- 随进度更新阶段状态：未开始 → 进行中 → 已完成
- 重大决策前重新阅读此计划
- 记录所有错误，避免重复犯错
